<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Task Manager â€” Home</title>
  <link rel="stylesheet" href="script.css" />
  <link rel="stylesheet" href="glass.css" />
</head>

<body>
  <script>
    //  AUTH GUARD
    const userId = localStorage.getItem('userId');
    if (!userId) {
      window.location.href = 'login.html';
    }
  </script>

  <div class="app">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="profile">
        <button id="sidebarToggle" class="sidebar-toggle" aria-label="Toggle sidebar">
          <!-- Hamburger Menu icon -->
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="18" x2="21" y2="18"></line>
          </svg>
        </button>

        <div class="profile-info">
          <div class="name"><span class="brand-color">Task</span> Manager</div>
          <div class="email">Yashwanthu702@gmail.com</div>
        </div>
      </div>

      <nav class="nav">
        <button class="nav-item active" aria-label="Dashboard">
          <span class="nav-icon" aria-hidden="true">
            <!-- Home icon -->
            <svg class="icon" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M3 9.5L12 3l9 6.5V20a1 1 0 0 1-1 1h-5v-6H9v6H4a1 1 0 0 1-1-1V9.5z" stroke="currentColor"
                stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
          </span>
          <span class="nav-text">Dashboard</span>
        </button>
        <button class="nav-item" id="focusTimeBtn" aria-label="Focus Time">
          <span class="nav-icon" aria-hidden="true">
            <!-- Lightning icon -->
            <svg class="icon" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M13 2L3 14h7l-1 8L21 10h-7l-1-8z" stroke="currentColor" stroke-width="1.25"
                stroke-linecap="round" stroke-linejoin="round" />
            </svg>
          </span>
          <span class="nav-text">Focus Time</span>
        </button>
        <button class="nav-item" id="myTaskBtn" aria-label="My Task">
          <span class="nav-icon" aria-hidden="true">
            <!-- Clipboard icon -->
            <svg class="icon" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M16 4h2a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h2" stroke="currentColor"
                stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round" />
              <path d="M9 2h6v4H9z" stroke="currentColor" stroke-width="1.25" stroke-linecap="round"
                stroke-linejoin="round" />
            </svg>
          </span>
          <span class="nav-text">My Task</span>
        </button>
        <button class="nav-item" id="dailyTasksBtn" aria-label="Task Categories">
          <span class="nav-icon" aria-hidden="true">
            <!-- Folder icon -->
            <svg class="icon" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M3 7a2 2 0 0 1 2-2h4l2 2h8a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V7z"
                stroke="currentColor" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
          </span>
          <span class="nav-text">Daily Tasks</span>
        </button>
        <button class="nav-item" aria-label="Settings">
          <span class="nav-icon" aria-hidden="true">
            <!-- Gear icon -->
            <svg class="icon" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 15.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7z" stroke="currentColor" stroke-width="1.25"
                stroke-linecap="round" stroke-linejoin="round" />
              <path
                d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06A2 2 0 0 1 5.27 16.9l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09c.66 0 1.24-.38 1.51-1A1.65 1.65 0 0 0 4.3 6.3L4.24 6.24A2 2 0 0 1 7.07 3.41l.06.06c.53.53 1.3.73 1.98.45.53-.23 1.11-.73 1.11-1.46V3a2 2 0 0 1 4 0v.07c0 .73.58 1.23 1.11 1.46.68.28 1.45.08 1.98-.45l.06-.06A2 2 0 0 1 20.59 7.1l-.06.06c-.23.68-.03 1.45.45 1.98.23.53.73 1.11 1.46 1.11H21a2 2 0 0 1 0 4h-.07c-.73 0-1.23.58-1.46 1.11-.28.68-.08 1.45.45 1.98z"
                stroke="currentColor" stroke-width="1.0" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
          </span>
          <span class="nav-text">Settings</span>
        </button>
        <button class="nav-item" aria-label="Help" onclick="window.location.href='help.html'">
          <span class="nav-icon" aria-hidden="true">
            <!-- Help / question icon -->
            <svg class="icon" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M9.09 9a3 3 0 1 1 5.82 1c0 1.5-2 2-2 3" stroke="currentColor" stroke-width="1.25"
                stroke-linecap="round" stroke-linejoin="round" />
              <path d="M12 17h.01" stroke="currentColor" stroke-width="1.25" stroke-linecap="round"
                stroke-linejoin="round" />
              <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="1.0" stroke-linecap="round"
                stroke-linejoin="round" />
            </svg>
          </span>
          <span class="nav-text">Help</span>
        </button>
      </nav>

      <div class="logout">Logout</div>
    </aside>

    <header class="mobile-header">
      <button id="mobileSidebarToggle" class="mobile-sidebar-toggle" aria-label="Open navigation">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
          stroke-linecap="round" stroke-linejoin="round">
          <line x1="3" y1="12" x2="21" y2="12"></line>
          <line x1="3" y1="6" x2="21" y2="6"></line>
          <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
      </button>
      <div class="mobile-brand">
        <span class="brand-color">Task</span> Manager
      </div>
    </header>

    <!-- Main Content -->
    <main class="main">
      <header class="topbar">
        <div class="brand">
          <span class="brand-color">Dash</span>board
        </div>

        <div class="search-area">
          <div class="search-wrapper">
            <input id="search" placeholder="Search your task here..." />
            <button id="searchClear" aria-label="Clear search">âœ•</button>
          </div>
          <button id="createTaskBtn" title="Add task">ï¼‹</button>
        </div>


        <div class="top-right">
          <div class="date">Tuesday <span>20/06/2023</span></div>
          <div class="avatar-wrapper">
            <div class="avatar" id="avatarBtn">YU</div>

            <div class="avatar-menu" id="avatarMenu">
              <button id="profileBtn">Profile</button>
              <button id="changePasswordBtn">Change Password</button>
              <button id="logoutAvatarBtn">Logout</button>
            </div>
          </div>

        </div>
      </header>

      <section class="welcome">
        <h1>Welcome back, <span class="welcome-name">Sundar</span> <span class="wave">ðŸ‘‹</span></h1>
        <!-- <div class="members">
          <div class="member">A</div>
          <div class="member">B</div>
          <div class="member">C</div>
        </div> -->
      </section>

      <section class="content-grid">
        <div class="left-column">
          <div class="card to-do">
            <div class="card-header">
              <h3>To-Do</h3>
              <button id="addTaskSmall">+ Add task</button>
            </div>
            <div class="to-do-sections">
              <div class="tasks-section">
                <h4>Tasks</h4>
                <div class="tasks-list">
                  <!-- created today, not started -->
                </div>
              </div>
              <div class="inprogress-section">
                <h4>In Progress</h4>
                <div class="inprogress-list">
                  <!-- sorted by longest-working-duration -->
                </div>
              </div>
              <div class="deadline-section">
                <h4>Deadline</h4>
                <div class="deadline-list">
                  <!-- deadline is today -->
                </div>
              </div>
            </div>
          </div>
        </div>

        <aside class="right-column">


          <div class="card completed-card">
            <h3>Completed Task</h3>
            <div id="completedList" class="completed-list">
              <!-- completed tasks appended here by JS -->
            </div>
          </div>
        </aside>
      </section>
    </main>
  </div>

  <!-- add task modal -->
  <div id="at_backdrop" class="at-backdrop" aria-hidden="true">
    <div class="at-modal" role="dialog" aria-modal="true" aria-labelledby="at_title_lbl">
      <div class="at-modal-inner">
        <div class="at-modal-header">
          <h3 id="at_title_lbl">Add New Task</h3>
          <button id="at_close_x" class="at-close-x" aria-label="Close">&times;</button>
        </div>

        <form id="at_form" class="at-form" autocomplete="off">
          <label class="at-label">Title
            <input id="at_title" name="title" class="at-input" placeholder="Task title" required />
          </label>

          <div style="display:flex; gap:10px;">
            <label class="at-label" style="flex:1">Due Date
              <input id="at_dueDate" name="dueDate" class="at-input" type="date" />
            </label>

            <label class="at-label" style="width:160px">Priority
              <select id="at_priority" name="priority" class="at-input">
                <option value="Low">Low</option>
                <option value="Medium">Medium</option>
                <option value="High" selected>High</option>
              </select>
            </label>
          </div>

          <label class="at-label">Task Description
            <textarea id="at_description" name="description" class="at-textarea" rows="5"
              placeholder="Start writing here..."></textarea>
          </label>

          <div class="at-footer">
            <button type="button" id="at_cancel" class="btn btn-ghost">Cancel</button>
            <button type="submit" id="at_submit" class="btn btn-primary">Done</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- view task modal (Read Only) -->
  <!-- view task modal (Read Only) - Redesigned -->
  <div id="tv_backdrop" class="modal-backdrop" aria-hidden="true" style="display: none;">
    <div class="modal-container" role="dialog" aria-modal="true" aria-labelledby="tv_title">

      <div class="modal-header">
        <h2 id="tv_title" class="modal-title">Task Details</h2>
        <button id="tv_close_x" class="modal-close" aria-label="Close">&times;</button>
      </div>

      <div class="modal-body">
        <div class="modal-section">
          <label class="modal-label">Description</label>
          <div id="tv_description" class="modal-desc-box"></div>
        </div>

        <div class="modal-meta-grid">
          <div class="meta-box">
            <span class="meta-label">Priority</span>
            <div id="tv_priority" class="meta-value badge"></div>
          </div>
          <div class="meta-box">
            <span class="meta-label">Due Date</span>
            <div id="tv_dueDate" class="meta-value"></div>
          </div>
          <div class="meta-box">
            <span class="meta-label">Status</span>
            <div id="tv_status" class="meta-value"></div>
          </div>
          <div class="meta-box">
            <span class="meta-label">Created</span>
            <div id="tv_created" class="meta-value"></div>
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <button type="button" id="tv_close_btn" class="btn btn-secondary">Close</button>
      </div>

    </div>
  </div>
  <script src="script.js"></script>
</body>

</html>